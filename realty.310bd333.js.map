{"mappings":"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","sources":["src/realty.js"],"sourcesContent":["import * as basicLightbox from 'basiclightbox';\nimport { v4 as uuidv4 } from 'uuid';\nimport '../node_modules/basiclightbox/dist/basicLightbox.min.css';\n\nconst addRealtyBtn = document.querySelector('.js-add-realty');\nconst filter = document.querySelector('.js-filter');\nconst filterRemoveBtn = document.querySelector('.js-filter-items-remove');\nconst LS_KEY = 'realty-items';\n\nconst realtyItems = JSON.parse(localStorage.getItem(LS_KEY)) ?? [];\nconst list = document.querySelector('.js-list');\nlet img = null;\n\nfilterRemoveBtn.addEventListener('click', handlerRemoveFilter);\nfilter.addEventListener('submit', handlerAddFilter);\n\naddRealtyBtn.addEventListener('click', onClick);\nlist.addEventListener('click', cardHandler);\n\nfunction handlerAddFilter(evt) {\n  evt.preventDefault();\n  const { filter } = evt.currentTarget.elements;\n  const filteredItems = realtyItems.filter(({status}) => status === filter.value);\n  list.innerHTML = createMarkup(filteredItems);\n}\n\nfunction handlerRemoveFilter() {\n  filter.reset();\n  list.innerHTML = createMarkup(realtyItems);\n}\nfunction onClick() {\n  const instance = basicLightbox.create(\n    `\n    <form action=\"submit\" class=\"js-form-realty form-realty\">\n\n    <div class='form-realty__input-block form-realty__input-block_row'>\n      <label for=\"photo\" class='form-realty__label'>Завантажте фото об'єкту</label>\n      <label for=\"photo\" class='form-realty__image-btn'></label>\n      <input type=\"file\" name=\"realty-photo\" id=\"photo\" accept=\"image/png, image/jpeg\"  class=\"js-test\"hidden>\n    </div>\n\n    <div class=\"js-form-realty__preview form-realty__preview\"></div>\n\n    <div class='form-realty__input-block'>\n    <label for=\"text\" class='form-realty__label'>Назва вашого об'єкта</label>\n    <input type=\"text\" class='form-realty__input' name=\"realty-title\" id=\"title\">\n    </div>\n\n    <div class='form-realty__input-block'>\n      <label for=\"details\" class='form-realty__label'>Опис об'єкту</label>\n      <textarea class='form-realty__input' name=\"realty-details\" id=\"details\"></textarea>\n    </div>\n\n    <div class='form-realty__input-block'>\n      <label for=\"rooms\" class='form-realty__label'>Кількість кімнат</label>\n      <input type=\"number\" class='form-realty__input' min=\"0\" name=\"realty-rooms\" id=\"rooms\">\n    </div>\n\n    <div class='form-realty__input-block'>\n      <label for=\"area\" class='form-realty__label'>Площа об'єкту м<sup>2</sup>;</label>\n      <input type=\"number\" class='form-realty__input' min=\"0\" name=\"realty-area\" id=\"area\">\n    </div>\n\n    <div class='form-realty__input-block'>\n      <label for=\"price\" class='form-realty__label'>Вартість об'єкту</label>\n      <input type=\"number\" class='form-realty__input' min=\"0\" name=\"realty-price\" id=\"price\">\n    </div>\n\n    <div class='form-realty__input-block'>\n      <label for=\"type\" class='form-realty__label'>Тип пропозиції</label>\n      <select name=\"realty-type\" id=\"type\" class='form-realty__select'>\n        <option value=\"Продаж\">Продаж</option>\n        <option value=\"Оренда\">Оренда</option>\n      </select>\n    </div>\n    <button class='form-realty__create'>Створити об'єкт</button>\n  </form>`,\n    {\n      onShow: () => {\n        document.body.classList.add('lock');\n      },\n      onClose: () => {\n        document.body.classList.remove('lock');\n      },\n    }\n  );\n\n  instance.show();\n\n  const form = document.querySelector('.js-form-realty');\n  form.addEventListener('submit', addRealty.bind(instance));\n  form.photo.addEventListener('change', onLoad);\n}\n\nfunction cardHandler(evt) {\n  if (!evt.target.closest('.js-realty-item')) {\n    return;\n  }\n  const { id } = evt.target.closest('.js-realty-item').dataset;\n  const { title, photo, details, price, area, rooms, type, status } =\n    realtyItems.find(({ id: currentId }) => currentId === id);\n  const instance =\n    basicLightbox.create(`<div data-id=\"${id}\" class='manage-popup'>\n  <div class='manage-popup__image'>\n    <img src=\"${photo}\" alt=\"${title}\">\n  </div>\n  <h2 class='manage-popup__title'>${title}</h2>\n  <h3 class='manage-popup__details'>${details}</h3>\n  <h3 class='manage-popup__price'>Ціна: ${price} $</h3>\n  <h3 class='manage-popup__square>Площа: ${area} м<sup>2</sup></h3>\n  <h3 class='manage-popup__numbers'>Кількість кімнат: ${rooms}</h3>\n  <h3 class='manage-popup__type'>Тип: ${type}</h3>\n  <h3 class='manage-popup__status'>Статус: ${status}</h3>\n  <button class=\"js-realty-info manage-popup__button\">Управління об'єктом</button>\n  </div>`);\n  instance.show();\n\n  const infoBtn = document.querySelector('.js-realty-info');\n  infoBtn.addEventListener('click', handlerRedirectMode.bind({ id }));\n}\n\nfunction onLoad() {\n  renderImage(this.files[0]);\n}\n\nfunction handlerRedirectMode() {\n  window.location.href = './manageItem.html?id=' + this.id;\n}\n\nfunction renderImage(file) {\n  const container = document.querySelector('.js-form-realty__preview');\n  const reader = new FileReader();\n\n  reader.onload = function (event) {\n    img = event.target.result;\n    container.insertAdjacentHTML(\n      'beforeend',\n      `<img src=\"${img}\" alt=\"preview\">`\n    );\n  };\n\n  reader.readAsDataURL(file);\n}\n\nfunction addRealty(evt) {\n  evt.preventDefault();\n  console.log(document.querySelector('.js-test').value);\n  const { details, rooms, area, price, type, title } =\n    evt.currentTarget.elements;\n\n  const data = {\n    id: uuidv4(),\n    photo: img,\n    title: title.value,\n    details: details.value,\n    rooms: rooms.value,\n    area: area.value,\n    price: price.value,\n    type: type.value,\n    status: type.value === 'Продаж' ? 'В продажі' : 'Вільно',\n  };\n  realtyItems.push(data);\n  localStorage.setItem(LS_KEY, JSON.stringify(realtyItems));\n  this.close();\n  list.innerHTML = createMarkup(realtyItems);\n}\n\n(function () {\n  if (!realtyItems.length) {\n    return;\n  }\n  list.insertAdjacentHTML('beforeend', createMarkup(realtyItems));\n})();\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({ status, id, photo, price, area, title, type }) => `\n      <li data-id=\"${id}\" class=\"js-realty-item main-objects__item\">\n        <div class='main-objects__body'>\n          <div class='main-objects__image'>\n            <img src=\"${photo}\" alt=\"${price}\">\n          </div>\n          <div class='main-objects__desc'>\n            <h2 class='main-objects__title'>${title}</h2>\n            <h3 class='main-objects__price'>Ціна: ${price}$</h3>\n            <h3 class='main-objects__square'>Площа: ${area} м<sup>2</sup></h3>\n            <h3 class='main-objects__status'>Статус: ${status}</h3>\n          </div>\n        </div>\n    </li>`\n    )\n    .join('');\n}\n"],"names":["$8d20cd6b5d69c379$var$ref","$dyT35","parcelRequire","$8d20cd6b5d69c379$var$addRealtyBtn","document","querySelector","$8d20cd6b5d69c379$var$filter","$8d20cd6b5d69c379$var$filterRemoveBtn","$8d20cd6b5d69c379$var$LS_KEY","$8d20cd6b5d69c379$var$realtyItems","JSON","parse","localStorage","getItem","$8d20cd6b5d69c379$var$list","$8d20cd6b5d69c379$var$img","$8d20cd6b5d69c379$var$onLoad","file","container","reader","this","files","FileReader","onload","event","target","result","insertAdjacentHTML","concat","readAsDataURL","$8d20cd6b5d69c379$var$handlerRedirectMode","window","location","href","id","$8d20cd6b5d69c379$var$addRealty","evt","preventDefault","console","log","value","_elements","currentTarget","elements","details","rooms","area","price","type","title","data","$glzNX","v4","photo","status","push","setItem","stringify","close","innerHTML","$8d20cd6b5d69c379$var$createMarkup","arr","map","param","join","addEventListener","reset","filter1","filter","filteredItems","instance","create","onShow","body","classList","add","onClose","remove","show","form","bind","closest","dataset","ref1","find","length"],"version":3,"file":"realty.310bd333.js.map"}