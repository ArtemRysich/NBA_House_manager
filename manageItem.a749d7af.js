var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},n=e.parcelRequired7c6;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in a){var n=a[e];delete a[e];var l={id:e,exports:{}};return t[e]=l,n.call(l.exports,l,l.exports),l.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){a[e]=t},e.parcelRequired7c6=n);var l=n("9B8F0");const s=document.location.search.slice(4),o=document.querySelector(".js-container"),r=document.querySelector(".js-timer"),i=document.querySelector(".js-prev-page");let c=null,d=null,u=null;function m({type:e,title:t,status:a,rooms:n,price:l,photo:s,details:r,area:i}){o.innerHTML=`<div class='main-manage__body'>\n  <div class='main-manage__image'>\n    <img src="${s}" alt="${t}">\n  </div>\n  <div class='main-manage__text'>\n    <h2 class='main-manage__title'>${t}</h2>\n    <h3 class='main-manage__desc'>Опис: ${r}</h3>\n    <h3 class='main-manage__type'>Тип: ${e}</h3>\n    <h3 class='main-manage__rooms'>Кімнат: ${n}</h3>\n    <h3 class='main-manage__status'>Статус: ${a}</h3>\n    <h3 class='main-manage__price'>Ціна: ${l}$</h3>\n    <h3 class='main-manage__square'>Площа: ${i} м<sup>2</sup></h3>\n  <button type="button" class="js-edit main-manage__button">Редагувати об'єкт</button>\n  </div>\n</div>`}function p(){const{title:e,photo:t,details:a,price:n,area:s,rooms:o,type:r,status:i}=u;c=t;const d=l.create(`\n<form action="submit" class="js-form-realty form-realty form-realty_big">\n\n<div class='form-realty__input-block form-realty__input-block_row'>\n  <label for="photo" class='form-realty__label'>Завантажте фото об'єкту*</label>\n  <label for="photo" class='form-realty__image-btn'></label>\n  <input type="file" name="realty-photo" id="photo" accept="image/png, image/jpeg" hidden>\n</div>\n<div class="js-form-realty__preview form-realty__preview"><img src="${t}" alt="preview"></div>\n\n<div class='form-realty__input-block'>\n<label for="text" class='form-realty__label'>Назва вашого об'єкта*</label>\n<input type="text" class='form-realty__input' name="realty-title" id="title" value="${e}">\n</div>\n\n<div class='form-realty__input-block'>\n  <label for="details" class='form-realty__label'>Опис об'єкту*</label>\n  <textarea type="text" class='form-realty__input' name="realty-details" id="details">${a}</textarea>\n</div>\n\n<div class='form-realty__input-block'>\n  <label for="rooms" class='form-realty__label'>Кількість кімнат*</label>\n  <input type="number" class='form-realty__input' min="0" name="realty-rooms"  value="${o}" id="rooms">\n</div>\n\n<div class='form-realty__input-block'>\n  <label for="area" class='form-realty__label'>Площа об'єкту м<sup>2</sup>*</label>\n  <input type="number" class='form-realty__input' min="0" name="realty-area" value="${s}" id="area">\n</div>\n\n<div class='form-realty__input-block'>\n  <label for="price" class='form-realty__label'>Вартість об'єкту*</label>\n  <input type="number" class='form-realty__input' min="0" name="realty-price"  value="${n}" id="price">\n</div>\n\n<div class='form-realty__input-block'>\n  <label for="type" class='form-realty__label'>Тип пропозиції*</label>\n  <select name="realty-type" id="type" class='form-realty__select'>\n    <option value="Продаж" ${"Продаж"===r?"selected":""}>Продаж</option>\n    <option value="Оренда" ${"Оренда"===r?"selected":""}>Оренда</option>\n  </select>\n</div>\n${function(e,t){return"Продаж"===e?`<div class='form-realty__input-block'>\n          <label for="status" class='form-realty__label'>Статус*</label>\n          <select name="realty-status" id="status" class='form-realty__select'>\n              <option value="В продажі" ${"В продажі"===t?"selected":""}>В продажі</option>\n              <option value="Продано" ${"Продано"===t?"selected":""}>Продано</option>\n          </select>\n          </div>`:`<div class='form-realty__input-block'>\n          <label for="status" class='form-realty__label'>Статус*</label>\n          <select name="realty-status" id="status" class='form-realty__select'>\n              <option value="Вільно" ${"Вільно"===t?"selected":""}>Вільно</option>\n              <option value="Здано" ${"Здано"===t?"selected":""}>Здано</option>\n          </select>\n          </div>`}(r,i)}\n<button class='form-realty__create'>Зберегти</button>\n<button type="button" class='form-realty__create js-form-realty__close'>Відмінити</button>\n</form>\n</div>`,{onShow:()=>{document.body.classList.add("lock")},onClose:()=>{document.body.classList.remove("lock")}});d.show();const m=document.querySelector(".js-form-realty"),p=document.querySelector(".js-form-realty__close");m.addEventListener("submit",_.bind(d)),p.addEventListener("click",(()=>d.close())),m.photo.addEventListener("change",f)}function _(e){e.preventDefault();const{details:t,rooms:a,area:n,price:l,type:o,title:r,status:i}=e.currentTarget.elements;let d=null;if("Здано"===i.value&&!u.rentTime){const e=new Date,t=e.getMonth();e.setMonth(11!==t?t+1:0),d=e}const p={id:s,photo:c,title:r.value,details:t.value,rooms:a.value,area:n.value,price:l.value,type:o.value,status:i.value,rentTime:d};m(p),y(p.rentTime),u=p,this.close()}function f(){!function(e){const t=document.querySelector(".js-form-realty__preview"),a=new FileReader;a.onload=function(e){c=e.target.result,t.innerHTML=`<img src="${c}" alt="preview">`},a.readAsDataURL(e)}(this.files[0])}function y(e){e&&setInterval((()=>{const t=new Date(e),a=new Date,n=t-a;if(n<=0){const e=a.getMonth();t.setMonth(11!==e?e+1:0),u.rentTime=t}const{days:l,hours:s,minutes:o,seconds:i}=function(e){const t=1e3,a=60*t,n=60*a,l=24*n,s=Math.floor(e/l),o=Math.floor(e%l/n),r=Math.floor(e%l%n/a),i=Math.floor(e%l%n%a/t);return{days:s,hours:o,minutes:r,seconds:i}}(n);r.innerHTML=`\n    <div class='timer'>\n      <h2 class='timer__title'>До отримання оренди залишилось!</h2>\n      <div class='fields'>\n        <div class="field">\n          <span class="value" data-days>${l}</span>\n          <span class="label">Днів</span>\n        </div>\n        <div class="field">\n          <span class="value" data-hours>${s}</span>\n          <span class="label">Годин</span>\n        </div>\n        <div class="field">\n          <span class="value" data-minutes>${o}</span>\n          <span class="label">Хвилин</span>\n        </div>\n        <div class="field">\n          <span class="value" data-seconds>${i}</span>\n          <span class="label">Секунд</span>\n        </div>\n      </div>\n    </div>`}),1e3)}i.addEventListener("click",(function(){history.back()})),async function(e){const t={method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("Token")}`}},a=await fetch(`https://nba-house-manager.herokuapp.com/objrent/${e}`,t);if(!a.ok)throw new Error("Invalid password");return a.json()}(s).then((e=>{u=e,d=u.rentTime,m(u),y(d);document.querySelector(".js-edit").addEventListener("click",p)})),y(u);
//# sourceMappingURL=manageItem.a749d7af.js.map
