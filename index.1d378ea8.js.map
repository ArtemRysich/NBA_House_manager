{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SCAAC,eAAeC,EAAUC,GACvB,MAAMC,EAAU,CACdC,OAAQ,OACRC,KAAMC,KAAKC,UAAUL,GACrBM,QAAS,CACP,eAAgB,qBAGdC,QAAaC,MACjB,gDACAP,GAEF,IAAKM,EAAKE,GACR,MAAM,IAAIC,MAAM,oBAGlB,OAAOH,EAAKI,M,CChBdb,eAAec,EAAWZ,GACxB,MAAMC,EAAU,CACdC,OAAQ,OACRC,KAAMC,KAAKC,UAAUL,GACrBM,QAAS,CACP,eAAgB,qBAGdC,QAAaC,MACjB,uDACAP,GAEF,IAAKM,EAAKE,GACR,MAAM,IAAIC,MAAM,oBAGlB,OAAOH,EAAKI,M,CFVd,MAAME,EAAYC,SAASC,cAAc,mBACnCC,EAAWF,SAASC,cAAc,mBAClCE,EAAaH,SAASC,cAAc,YACpCG,EAAUJ,SAASC,cAAc,WAKvC,GAHAF,EAAUM,iBAAiB,QAASC,GACpCJ,EAASG,iBAAiB,QAASE,GAE/BC,aAAaC,QAAQ,SAAU,CACjCN,EAAWO,QAAS,EACpBN,EAAQO,UAAY,oDACLX,SAASC,cAAc,cAC/BI,iBAAiB,QAASO,E,CAGnC,SAASN,IACP,MAAMO,EAAW/B,EAAAgC,OAAqB,wUAOtCD,EAASE,OACMf,SAASC,cAAc,cAC/BI,iBAAiB,SAAUW,EAAaC,KAAKJ,G,CAEtD,SAASN,IACP,MAAMM,EAAW/B,EAAAgC,OACf,8TAOA,CACEI,OAAQ,KACNlB,SAASX,KAAK8B,UAAUC,IAAI,OAAO,EAErCC,QAAS,KACPrB,SAASX,KAAK8B,UAAUG,OAAO,OAAO,IAI5CT,EAASE,OACKf,SAASC,cAAc,aAC/BI,iBAAiB,SAAUkB,EAAYN,KAAKJ,G,CAGpD,SAASG,EAAaQ,GACpBA,EAAEC,iBAEF,MAAMC,EAAWC,MAEfC,OAASC,MAAOC,GAChBC,UAAYF,MAAOE,IACjBP,EAAEQ,cAAcC,SAEd/C,EAAW,C,SACf4C,E,SACAC,GAGFjC,EAAWZ,GACRgD,MAAK,KACJR,EAASS,OAAO,IACfD,MAAK,IAAMjD,EAAUC,GAAUgD,MAAKE,IACnCjC,EAAWO,QAAS,EACpBN,EAAQO,UAAY,oDACLX,SAASC,cAAc,cAC/BI,iBAAiB,QAASO,GACjCJ,aAAa6B,QAAQ,QAASD,EAAKE,OACnCZ,EAASS,OAAO,MAEnBI,OAAMC,GAAOC,QAAQC,IAAIF,I,CAG9B,SAASjB,EAAYC,GACnBA,EAAEC,iBACF,MACEG,OAASC,MAAOC,GAChBC,UAAYF,MAAOE,IACjBP,EAAEQ,cAAcC,SAMpBhD,EAJiB,C,SACf6C,E,SACAC,IAGCG,MAAKE,IAEJjC,EAAWO,QAAS,EACpBN,EAAQO,UAAY,oDACLX,SAASC,cAAc,cAC/BI,iBAAiB,QAASO,GACjCJ,aAAa6B,QAAQ,QAASD,EAAKE,OALlBX,KAMRQ,OAAO,IAEjBI,OAAMC,GAAOC,QAAQC,IAAIF,I,CAG9B,SAAS5B,IACPJ,aAAamC,WAAW,SACxBxC,EAAWO,QAAS,EACpBN,EAAQO,UAAY,6HACpB,MAAMiC,EAAY5C,SAASC,cAAc,mBACnC4C,EAAW7C,SAASC,cAAc,mBACxC2C,EAAUvC,iBAAiB,QAASC,GACpCuC,EAASxC,iBAAiB,QAASE,E","sources":["src/index.js","src/services/auth/login.js","src/services/auth/signup.js"],"sourcesContent":["import * as basicLightbox from 'basiclightbox';\nimport '../node_modules/basiclightbox/dist/basicLightbox.min.css';\n\nimport { loginCall } from './services/auth/login';\nimport { signUpCall } from './services/auth/signup';\n\nconst signUpBtn = document.querySelector('.js-show-signUp');\nconst logInBtn = document.querySelector('.js-show-signIn');\nconst linkHeader = document.querySelector('.js-link');\nconst regForm = document.querySelector('.js_reg');\n\nsignUpBtn.addEventListener('click', showSignUp);\nlogInBtn.addEventListener('click', showLogIn);\n\nif (localStorage.getItem('Token')) {\n  linkHeader.hidden = false;\n  regForm.innerHTML = `<span class=\"js-logout header__link\">Вийти</span>`;\n  const logout = document.querySelector('.js-logout');\n  logout.addEventListener('click', handlerLogout);\n}\n\nfunction showSignUp() {\n  const instance = basicLightbox.create(`\n  <form class=\"js-signIn signIn\">\n    <input type=\"email\" name=\"email\" class='signIn__input' placeholder=\"Введіть емейл\" required/>\n    <input type=\"password\" class='signIn__input' name=\"password\" placeholder=\"Введіть пароль\" required/>\n    <button class='signIn__button'>Зареєструватись</button>\n  </form>\n    `);\n  instance.show();\n  const signIn = document.querySelector('.js-signIn');\n  signIn.addEventListener('submit', onCreateUser.bind(instance));\n}\nfunction showLogIn() {\n  const instance = basicLightbox.create(\n    `\n    <form class=\"js-logIn logIn\">\n    <input type=\"text\" name=\"email\" class='logIn__input' placeholder=\"Введіть емейл...\" required/>\n    <input type=\"password\" name=\"password\" class='logIn__input' placeholder=\"Введіть пароль...\" required/>\n    <button class='logIn__button'>Увійти</button>\n  </form>\n  `,\n    {\n      onShow: () => {\n        document.body.classList.add('lock');\n      },\n      onClose: () => {\n        document.body.classList.remove('lock');\n      },\n    }\n  );\n  instance.show();\n  const logIn = document.querySelector('.js-logIn');\n  logIn.addEventListener('submit', onLogInUser.bind(instance));\n}\n\nfunction onCreateUser(e) {\n  e.preventDefault();\n\n  const instanse = this;\n  const {\n    email: { value: username },\n    password: { value: password },\n  } = e.currentTarget.elements;\n\n  const userData = {\n    username,\n    password,\n  };\n\n  signUpCall(userData)\n    .then(() => {\n      instanse.close();\n    }).then(() => loginCall(userData).then(data=> {\n        linkHeader.hidden = false;\n        regForm.innerHTML = `<span class=\"js-logout header__link\">Вийти</span>`;\n        const logout = document.querySelector('.js-logout');\n        logout.addEventListener('click', handlerLogout);\n        localStorage.setItem('Token', data.token);\n        instanse.close();\n    }))\n    .catch(err => console.log(err));\n}\n\nfunction onLogInUser(e) {\n  e.preventDefault();\n  const {\n    email: { value: username },\n    password: { value: password },\n  } = e.currentTarget.elements;\n\n  const userData = {\n    username,\n    password,\n  };\n  loginCall(userData)\n    .then(data => {\n      const instanse = this;\n      linkHeader.hidden = false;\n      regForm.innerHTML = `<span class=\"js-logout header__link\">Вийти</span>`;\n      const logout = document.querySelector('.js-logout');\n      logout.addEventListener('click', handlerLogout);\n      localStorage.setItem('Token', data.token);\n      instanse.close();\n    })\n    .catch(err => console.log(err));\n}\n\nfunction handlerLogout() {\n  localStorage.removeItem('Token');\n  linkHeader.hidden = true;\n  regForm.innerHTML = `<span class=\"js-show-signIn header__link\">Увійти</span> / <span class=\"js-show-signUp header__link\">Зареєструватись</span>`;\n  const signUpBtn = document.querySelector('.js-show-signUp');\n  const logInBtn = document.querySelector('.js-show-signIn');\n  signUpBtn.addEventListener('click', showSignUp);\n  logInBtn.addEventListener('click', showLogIn);\n}\n","async function loginCall(userData) {\n  const options = {\n    method: 'POST',\n    body: JSON.stringify(userData),\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  };\n  const resp = await fetch(\n    'https://nba-house-manager.herokuapp.com/login',\n    options\n  );\n  if (!resp.ok) {\n    throw new Error('Invalid password');\n  }\n\n  return resp.json();\n}\n\nexport { loginCall };\n","async function signUpCall(userData) {\n  const options = {\n    method: 'POST',\n    body: JSON.stringify(userData),\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  };\n  const resp = await fetch(\n    'https://nba-house-manager.herokuapp.com/users/create',\n    options\n  );\n  if (!resp.ok) {\n    throw new Error('Invalid password');\n  }\n\n  return resp.json();\n}\n\nexport { signUpCall };\n"],"names":["$9B8F0","parcelRequire","async","$2c14a4a2131eacce$export$cd7d4df50c8f5a2d","userData","options","method","body","JSON","stringify","headers","resp","fetch","ok","Error","json","$dc7e3b286c7f18de$export$7e088af90f8d5b75","$1f0dc3b9307be026$var$signUpBtn","document","querySelector","$1f0dc3b9307be026$var$logInBtn","$1f0dc3b9307be026$var$linkHeader","$1f0dc3b9307be026$var$regForm","addEventListener","$1f0dc3b9307be026$var$showSignUp","$1f0dc3b9307be026$var$showLogIn","localStorage","getItem","hidden","innerHTML","$1f0dc3b9307be026$var$handlerLogout","instance","create","show","$1f0dc3b9307be026$var$onCreateUser","bind","onShow","classList","add","onClose","remove","$1f0dc3b9307be026$var$onLogInUser","e","preventDefault","instanse","this","email","value","username","password","currentTarget","elements","then","close","data","setItem","token","catch","err","console","log","removeItem","signUpBtn1","logInBtn1"],"version":3,"file":"index.1d378ea8.js.map"}