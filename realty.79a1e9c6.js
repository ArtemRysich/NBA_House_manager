var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},n=e.parcelRequired7c6;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in a){var n=a[e];delete a[e];var l={id:e,exports:{}};return t[e]=l,n.call(l.exports,l,l.exports),l.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){a[e]=t},e.parcelRequired7c6=n);var l=n("9B8F0");async function r(e){const t=localStorage.getItem("Token"),a={method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}},n=await fetch("https://nba-house-manager.herokuapp.com/objrent/create",a);if(!n.ok)throw new Error("Invalid password");return n.json()}const o=document.querySelector(".js-add-realty");var s;const i=null!==(s=JSON.parse(localStorage.getItem("realty-items")))&&void 0!==s?s:[],c=document.querySelector(".js-list");let d=null;o.addEventListener("click",(function(){const e=l.create('\n    <form action="submit" class="js-form-realty form-realty">\n\n    <div class=\'form-realty__input-block form-realty__input-block_row\'>\n      <label for="photo" class=\'form-realty__label\'>Завантажте фото об\'єкту*</label>\n      <label for="photo" class=\'form-realty__image-btn\'></label>\n      <input type="file" name="realty-photo" id="photo" accept="image/png, image/jpeg" hidden required>\n    </div>\n\n    <div class="js-form-realty__preview form-realty__preview"></div>\n\n    <div class=\'form-realty__input-block\'>\n    <label for="text" class=\'form-realty__label\'>Назва вашого об\'єкта*</label>\n    <input type="text" class=\'form-realty__input\' name="realty-title" id="title" required>\n    </div>\n\n    <div class=\'form-realty__input-block\'>\n      <label for="details" class=\'form-realty__label\'>Опис об\'єкту*</label>\n      <textarea class=\'form-realty__input\' name="realty-details" id="details" required></textarea>\n    </div>\n\n    <div class=\'form-realty__input-block\'>\n      <label for="rooms" class=\'form-realty__label\'>Кількість кімнат*</label>\n      <input type="number" class=\'form-realty__input\' min="0" name="realty-rooms" id="rooms" required>\n    </div>\n\n    <div class=\'form-realty__input-block\'>\n      <label for="area" class=\'form-realty__label\'>Площа об\'єкту м<sup>2</sup>*</label>\n      <input type="number" class=\'form-realty__input\' min="0" name="realty-area" id="area" required>\n    </div>\n\n    <div class=\'form-realty__input-block\'>\n      <label for="price" class=\'form-realty__label\'>Вартість об\'єкту*</label>\n      <input type="number" class=\'form-realty__input\' min="0" name="realty-price" id="price" required>\n    </div>\n\n    <div class=\'form-realty__input-block\'>\n      <label for="type" class=\'form-realty__label\'>Тип пропозиції*</label>\n      <select name="realty-type" id="type" class=\'form-realty__select\' required>\n        <option value="Оренда">Оренда</option>\n        <option value="Продаж">Продаж</option>\n      </select>\n    </div>\n    <button class=\'form-realty__create\'>Створити об\'єкт</button>\n  </form>',{onShow:()=>{document.body.classList.add("lock")},onClose:()=>{document.body.classList.remove("lock")}});e.show();const t=document.querySelector(".js-form-realty");t.addEventListener("submit",_.bind(e)),t.photo.addEventListener("change",p)})),c.addEventListener("click",(function(e){if(!e.target.closest(".js-realty-item"))return;const{id:t}=e.target.closest(".js-realty-item").dataset,{title:a,photo:n,details:r,price:o,area:s,rooms:c,type:d,status:u}=i.find((({id:e})=>e===t));l.create(`<div data-id="${t}" class='manage-popup'>\n  <div class='manage-popup__image'>\n    <img src="${n}" alt="${a}">\n  </div>\n  <h2 class='manage-popup__title'>${a}</h2>\n  <h3 class='manage-popup__details'>${r}</h3>\n  <h3 class='manage-popup__price'>Ціна: ${o} $</h3>\n  <h3 class='manage-popup__square>Площа: ${s} м<sup>2</sup></h3>\n  <h3 class='manage-popup__numbers'>Кількість кімнат: ${c}</h3>\n  <h3 class='manage-popup__type'>Тип: ${d}</h3>\n  <h3 class='manage-popup__status'>Статус: ${u}</h3>\n  <button class="js-realty-info manage-popup__button">Управління об'єктом</button>\n  </div>`).show();document.querySelector(".js-realty-info").addEventListener("click",m.bind({id:t}))}));const u=document.querySelector(".js-filter");function p(){!function(e){const t=document.querySelector(".js-form-realty__preview"),a=new FileReader;a.onload=function(e){d=e.target.result,t.insertAdjacentHTML("beforeend",`<img src="${d}" alt="preview">`)},a.readAsDataURL(e)}(this.files[0])}function m(){window.location.href="./manageItem.html?id="+this.id}function _(e){e.preventDefault();const{details:t,rooms:a,area:n,price:l,type:o,title:s}=e.currentTarget.elements,i={photo:d,title:s.value,details:t.value,rooms:a.value,area:n.value,price:l.value,type:o.value,status:"Продаж"===o.value?"В продажі":"Вільно"};console.log(i),r(i).then((e=>console.log(e))).catch((e=>console.log(e))),this.close()}function f(e){return e.map((({status:e,id:t,photo:a,price:n,area:l,title:r,type:o})=>`\n      <li data-id="${t}" class="js-realty-item main-objects__item">\n        <div class='main-objects__body'>\n          <div class='main-objects__image'>\n            <img src="${a}" alt="${n}">\n          </div>\n          <div class='main-objects__desc'>\n            <h2 class='main-objects__title'>${r}</h2>\n            <h3 class='main-objects__price'>Ціна: ${n}$</h3>\n            <h3 class='main-objects__square'>Площа: ${l} м<sup>2</sup></h3>\n            <h3 class='main-objects__status'>Статус: ${e}</h3>\n          </div>\n        </div>\n    </li>`)).join("")}document.querySelector(".js-filter-items-remove").addEventListener("click",(function(){u.reset(),c.innerHTML=f(i)})),u.addEventListener("submit",(function(e){e.preventDefault();const{filter:t}=e.currentTarget.elements,a=i.filter((({status:e})=>e===t.value));c.innerHTML=f(a)})),i.length&&c.insertAdjacentHTML("beforeend",f(i));
//# sourceMappingURL=realty.79a1e9c6.js.map
