{"mappings":"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","sources":["src/realty.js","src/services/collection/addToCollection.js"],"sourcesContent":["import * as basicLightbox from 'basiclightbox';\nimport '../node_modules/basiclightbox/dist/basicLightbox.min.css';\nimport { addToCollection } from './services/collection/addToCollection';\n\nconst addRealtyBtn = document.querySelector('.js-add-realty');\nconst LS_KEY = 'realty-items';\n\nconst realtyItems = JSON.parse(localStorage.getItem(LS_KEY)) ?? [];\nconst list = document.querySelector('.js-list');\nlet img = null;\naddRealtyBtn.addEventListener('click', onClick);\nlist.addEventListener('click', cardHandler);\n\nconst filter = document.querySelector('.js-filter');\nconst filterRemoveBtn = document.querySelector('.js-filter-items-remove');\n\nfilterRemoveBtn.addEventListener('click', handlerRemoveFilter);\nfilter.addEventListener('submit', handlerAddFilter);\n\nfunction handlerAddFilter(evt) {\n  evt.preventDefault();\n  const { filter } = evt.currentTarget.elements;\n  const filteredItems = realtyItems.filter(\n    ({ status }) => status === filter.value\n  );\n  list.innerHTML = createMarkup(filteredItems);\n}\n\nfunction handlerRemoveFilter() {\n  filter.reset();\n  list.innerHTML = createMarkup(realtyItems);\n}\nfunction onClick() {\n  const instance = basicLightbox.create(\n    `\n    <form action=\"submit\" class=\"js-form-realty form-realty\">\n\n    <div class='form-realty__input-block form-realty__input-block_row'>\n      <label for=\"photo\" class='form-realty__label'>Завантажте фото об'єкту*</label>\n      <label for=\"photo\" class='form-realty__image-btn'></label>\n      <input type=\"file\" name=\"realty-photo\" id=\"photo\" accept=\"image/png, image/jpeg\" hidden required>\n    </div>\n\n    <div class=\"js-form-realty__preview form-realty__preview\"></div>\n\n    <div class='form-realty__input-block'>\n    <label for=\"text\" class='form-realty__label'>Назва вашого об'єкта*</label>\n    <input type=\"text\" class='form-realty__input' name=\"realty-title\" id=\"title\" required>\n    </div>\n\n    <div class='form-realty__input-block'>\n      <label for=\"details\" class='form-realty__label'>Опис об'єкту*</label>\n      <textarea class='form-realty__input' name=\"realty-details\" id=\"details\" required></textarea>\n    </div>\n\n    <div class='form-realty__input-block'>\n      <label for=\"rooms\" class='form-realty__label'>Кількість кімнат*</label>\n      <input type=\"number\" class='form-realty__input' min=\"0\" name=\"realty-rooms\" id=\"rooms\" required>\n    </div>\n\n    <div class='form-realty__input-block'>\n      <label for=\"area\" class='form-realty__label'>Площа об'єкту м<sup>2</sup>*</label>\n      <input type=\"number\" class='form-realty__input' min=\"0\" name=\"realty-area\" id=\"area\" required>\n    </div>\n\n    <div class='form-realty__input-block'>\n      <label for=\"price\" class='form-realty__label'>Вартість об'єкту*</label>\n      <input type=\"number\" class='form-realty__input' min=\"0\" name=\"realty-price\" id=\"price\" required>\n    </div>\n\n    <div class='form-realty__input-block'>\n      <label for=\"type\" class='form-realty__label'>Тип пропозиції*</label>\n      <select name=\"realty-type\" id=\"type\" class='form-realty__select' required>\n        <option value=\"Оренда\">Оренда</option>\n        <option value=\"Продаж\">Продаж</option>\n      </select>\n    </div>\n    <button class='form-realty__create'>Створити об'єкт</button>\n  </form>`,\n    {\n      onShow: () => {\n        document.body.classList.add('lock');\n      },\n      onClose: () => {\n        document.body.classList.remove('lock');\n      },\n    }\n  );\n\n  instance.show();\n\n  const form = document.querySelector('.js-form-realty');\n  form.addEventListener('submit', addRealty.bind(instance));\n  form.photo.addEventListener('change', onLoad);\n}\n\nfunction cardHandler(evt) {\n  if (!evt.target.closest('.js-realty-item')) {\n    return;\n  }\n  const { id } = evt.target.closest('.js-realty-item').dataset;\n  const { title, photo, details, price, area, rooms, type, status } =\n    realtyItems.find(({ id: currentId }) => currentId === id);\n  const instance =\n    basicLightbox.create(`<div data-id=\"${id}\" class='manage-popup'>\n  <div class='manage-popup__image'>\n    <img src=\"${photo}\" alt=\"${title}\">\n  </div>\n  <h2 class='manage-popup__title'>${title}</h2>\n  <h3 class='manage-popup__details'>${details}</h3>\n  <h3 class='manage-popup__price'>Ціна: ${price} $</h3>\n  <h3 class='manage-popup__square>Площа: ${area} м<sup>2</sup></h3>\n  <h3 class='manage-popup__numbers'>Кількість кімнат: ${rooms}</h3>\n  <h3 class='manage-popup__type'>Тип: ${type}</h3>\n  <h3 class='manage-popup__status'>Статус: ${status}</h3>\n  <button class=\"js-realty-info manage-popup__button\">Управління об'єктом</button>\n  </div>`);\n  instance.show();\n\n  const infoBtn = document.querySelector('.js-realty-info');\n  infoBtn.addEventListener('click', handlerRedirectMode.bind({ id }));\n}\n\nfunction onLoad() {\n  renderImage(this.files[0]);\n}\n\nfunction handlerRedirectMode() {\n  window.location.href = './manageItem.html?id=' + this.id;\n}\n\nfunction renderImage(file) {\n  const container = document.querySelector('.js-form-realty__preview');\n  const reader = new FileReader();\n\n  reader.onload = function (event) {\n    img = event.target.result;\n    container.insertAdjacentHTML(\n      'beforeend',\n      `<img src=\"${img}\" alt=\"preview\">`\n    );\n  };\n\n  reader.readAsDataURL(file);\n}\n\nfunction addRealty(evt) {\n  evt.preventDefault();\n  const { details, rooms, area, price, type, title } =\n    evt.currentTarget.elements;\n\n  const data = {\n    photo: img,\n    title: title.value,\n    details: details.value,\n    rooms: rooms.value,\n    area: area.value,\n    price: price.value,\n    type: type.value,\n    status: type.value === 'Продаж' ? 'В продажі' : 'Вільно',\n  };\n  console.log(data);\n  addToCollection(data)\n    .then(data => console.log(data))\n    .catch(err => console.log(err));\n  this.close();\n  //   list.innerHTML = createMarkup(realtyItems);\n}\n\n(function () {\n  if (!realtyItems.length) {\n    return;\n  }\n  list.insertAdjacentHTML('beforeend', createMarkup(realtyItems));\n})();\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({ status, id, photo, price, area, title, type }) => `\n      <li data-id=\"${id}\" class=\"js-realty-item main-objects__item\">\n        <div class='main-objects__body'>\n          <div class='main-objects__image'>\n            <img src=\"${photo}\" alt=\"${price}\">\n          </div>\n          <div class='main-objects__desc'>\n            <h2 class='main-objects__title'>${title}</h2>\n            <h3 class='main-objects__price'>Ціна: ${price}$</h3>\n            <h3 class='main-objects__square'>Площа: ${area} м<sup>2</sup></h3>\n            <h3 class='main-objects__status'>Статус: ${status}</h3>\n          </div>\n        </div>\n    </li>`\n    )\n    .join('');\n}\n","async function addToCollection(data) {\n  const token = localStorage.getItem('Token');\n  const options = {\n    method: 'POST',\n    body: JSON.stringify(data),\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`,\n    },\n  };\n  const resp = await fetch(\n    'https://nba-house-manager.herokuapp.com/objrent/create',\n    options\n  );\n  if (!resp.ok) {\n    throw new Error('Invalid password');\n  }\n\n  return resp.json();\n}\n\nexport { addToCollection };\n"],"names":["$dyT35","parcelRequire","$bpxeT","$099768cf92363d9b$export$fe33f556c78278ee","data","$099768cf92363d9b$var$_addToCollection","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","token","options","resp","localStorage","getItem","method","body","JSON","stringify","headers","Authorization","concat","fetch","_ctx","sent","ok","Error","json","$8d20cd6b5d69c379$var$ref","$8d20cd6b5d69c379$var$addRealtyBtn","document","querySelector","$8d20cd6b5d69c379$var$realtyItems","parse","$8d20cd6b5d69c379$var$list","$8d20cd6b5d69c379$var$img","addEventListener","instance","create","onShow","classList","add","onClose","remove","show","form","$8d20cd6b5d69c379$var$addRealty","bind","photo","$8d20cd6b5d69c379$var$onLoad","evt","target","closest","id","dataset","ref1","find","param","title","details","price","area","rooms","type","status","$8d20cd6b5d69c379$var$handlerRedirectMode","$8d20cd6b5d69c379$var$filter","file","container","reader","files","FileReader","onload","event","result","insertAdjacentHTML","readAsDataURL","window","location","href","preventDefault","_elements","currentTarget","elements","data1","value","console","log","then","catch","err","close","$8d20cd6b5d69c379$var$createMarkup","arr","map","join","reset","innerHTML","filter1","filter","filteredItems","length"],"version":3,"file":"realty.6acab05f.js.map"}