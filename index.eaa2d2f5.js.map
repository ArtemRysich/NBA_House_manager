{"mappings":"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","sources":["src/index.js","src/services/auth/login.js","src/services/auth/signup.js"],"sourcesContent":["import * as basicLightbox from 'basiclightbox';\nimport '../node_modules/basiclightbox/dist/basicLightbox.min.css';\n\nimport { loginCall } from './services/auth/login';\nimport { signUpCall } from './services/auth/signup';\n\nconst signUpBtn = document.querySelector('.js-show-signUp');\nconst logInBtn = document.querySelector('.js-show-signIn');\nconst linkHeader = document.querySelector('.js-link');\nconst regForm = document.querySelector('.js_reg');\n\nsignUpBtn.addEventListener('click', showSignUp);\nlogInBtn.addEventListener('click', showLogIn);\n\nif (localStorage.getItem('Token')) {\n  linkHeader.hidden = false;\n  regForm.innerHTML = `<span class=\"js-logout header__link\">Вийти</span>`;\n  const logout = document.querySelector('.js-logout');\n  logout.addEventListener('click', handlerLogout);\n}\n\nfunction showSignUp() {\n  const instance = basicLightbox.create(`\n  <form class=\"js-signIn signIn\">\n    <input type=\"email\" name=\"email\" class='signIn__input' placeholder=\"Введіть емейл\" />\n    <input type=\"password\" class='signIn__input' name=\"password\" placeholder=\"Введіть пароль\" />\n    <button class='signIn__button'>Зареєструватись</button>\n  </form>\n    `);\n  instance.show();\n  const signIn = document.querySelector('.js-signIn');\n  signIn.addEventListener('submit', onCreateUser.bind(instance));\n}\nfunction showLogIn() {\n  const instance = basicLightbox.create(\n    `\n    <form class=\"js-logIn logIn\">\n    <input type=\"text\" name=\"email\" class='logIn__input' placeholder=\"Введіть емейл...\" />\n    <input type=\"password\" name=\"password\" class='logIn__input' placeholder=\"Введіть пароль...\" />\n    <button class='logIn__button'>Увійти</button>\n  </form>\n  `,\n    {\n      onShow: () => {\n        document.body.classList.add('lock');\n      },\n      onClose: () => {\n        document.body.classList.remove('lock');\n      },\n    }\n  );\n  instance.show();\n  const logIn = document.querySelector('.js-logIn');\n  logIn.addEventListener('submit', onLogInUser.bind(instance));\n}\n\nfunction onCreateUser(e) {\n  e.preventDefault();\n\n  const instanse = this;\n  const {\n    email: { value: username },\n    password: { value: password },\n  } = e.currentTarget.elements;\n\n  const userData = {\n    username,\n    password,\n  };\n\n  signUpCall(userData)\n    .then(() => {\n      instanse.close();\n    }).then(() => loginCall(userData).then(data=> {\n        linkHeader.hidden = false;\n        regForm.innerHTML = `<span class=\"js-logout header__link\">Вийти</span>`;\n        const logout = document.querySelector('.js-logout');\n        logout.addEventListener('click', handlerLogout);\n        localStorage.setItem('Token', data.token);\n        instanse.close();\n    }))\n    .catch(err => console.log(err));\n}\n\nfunction onLogInUser(e) {\n  e.preventDefault();\n  const {\n    email: { value: username },\n    password: { value: password },\n  } = e.currentTarget.elements;\n\n  const userData = {\n    username,\n    password,\n  };\n  loginCall(userData)\n    .then(data => {\n      const instanse = this;\n      linkHeader.hidden = false;\n      regForm.innerHTML = `<span class=\"js-logout header__link\">Вийти</span>`;\n      const logout = document.querySelector('.js-logout');\n      logout.addEventListener('click', handlerLogout);\n      localStorage.setItem('Token', data.token);\n      instanse.close();\n    })\n    .catch(err => console.log(err));\n}\n\nfunction handlerLogout() {\n  localStorage.removeItem('Token');\n  linkHeader.hidden = true;\n  regForm.innerHTML = `<span class=\"js-show-signIn header__link\">Увійти</span> / <span class=\"js-show-signUp header__link\">Зареєструватись</span>`;\n  const signUpBtn = document.querySelector('.js-show-signUp');\n  const logInBtn = document.querySelector('.js-show-signIn');\n  signUpBtn.addEventListener('click', showSignUp);\n  logInBtn.addEventListener('click', showLogIn);\n}\n","async function loginCall(userData) {\n  const options = {\n    method: 'POST',\n    body: JSON.stringify(userData),\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  };\n  const resp = await fetch(\n    'https://nba-house-manager.herokuapp.com/login',\n    options\n  );\n  if (!resp.ok) {\n    throw new Error('Invalid password');\n  }\n\n  return resp.json();\n}\n\nexport { loginCall };\n","async function signUpCall(userData) {\n  const options = {\n    method: 'POST',\n    body: JSON.stringify(userData),\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  };\n  const resp = await fetch(\n    'https://nba-house-manager.herokuapp.com/users/create',\n    options\n  );\n  if (!resp.ok) {\n    throw new Error('Invalid password');\n  }\n\n  return resp.json();\n}\n\nexport { signUpCall };\n"],"names":["$dyT35","parcelRequire","$bpxeT","$14202ae84789e271$export$cd7d4df50c8f5a2d","userData","$14202ae84789e271$var$_loginCall","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","options","resp","method","body","JSON","stringify","headers","fetch","_ctx","sent","ok","Error","json","$e1b3c74b070f8d55$export$7e088af90f8d5b75","$e1b3c74b070f8d55$var$_signUpCall","$b8f9b7833fa37166$var$signUpBtn","document","querySelector","$b8f9b7833fa37166$var$logInBtn","$b8f9b7833fa37166$var$linkHeader","$b8f9b7833fa37166$var$regForm","addEventListener","$b8f9b7833fa37166$var$showSignUp","$b8f9b7833fa37166$var$showLogIn","localStorage","getItem","hidden","innerHTML","$b8f9b7833fa37166$var$handlerLogout","instance","create","show","$b8f9b7833fa37166$var$onCreateUser","bind","onShow","classList","add","onClose","remove","$b8f9b7833fa37166$var$onLogInUser","e","preventDefault","instanse","_elements","currentTarget","elements","username","email","value","password","then","close","data","setItem","token","catch","err","console","log","_this","removeItem","signUpBtn1","logInBtn1"],"version":3,"file":"index.eaa2d2f5.js.map"}